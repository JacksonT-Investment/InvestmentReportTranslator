<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç ”æŠ¥è§£è¯»ç»“æœ - ç ”æŠ¥è§£è¯»åŠ©æ‰‹</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        /* ===== å¯ç¼–è¾‘çš„CSSå˜é‡ ===== */
        :root {
            --primary-color: #1a365d;
            --accent-color: #d69e2e;
            --text-color: #2d3748;
            --bg-gradient-start: #f8fafc;
            --bg-gradient-end: #e2e8f0;
        }

        body {
            font-family: 'Noto Sans SC', sans-serif;
            background: linear-gradient(135deg, var(--bg-gradient-start) 0%, var(--bg-gradient-end) 100%);
        }
        
        .hero-title {
            font-family: 'Noto Serif SC', serif;
        }
        
        .nav-blur {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
        }
        
        .content-card {
            background: white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        .original-text {
            border-left: 4px solid #3b82f6;
            background: #eff6ff;
        }
        
        .interpretation-text {
            border-left: 4px solid #f59e0b;
            background: #fffbeb;
        }
        
        .key-point {
            border-left: 4px solid #10b981;
            background: #ecfdf5;
        }
        
        .sidebar-nav {
            position: sticky;
            top: 100px;
            max-height: calc(100vh - 120px);
            overflow-y: auto;
        }
        
        .nav-item {
            transition: all 0.2s ease;
        }
        
        .nav-item:hover {
            background: #f3f4f6;
            transform: translateX(4px);
        }
        
        .nav-item.active {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
        }
        
        .highlight-number {
            background: linear-gradient(45deg, #f59e0b, #f97316);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: bold;
        }
        
        .loading-spinner {
            border: 3px solid rgba(59, 130, 246, 0.3);
            border-radius: 50%;
            border-top: 3px solid #3b82f6;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- ===== å¯¼èˆªæ  - å¯ç¼–è¾‘ ===== -->
    <nav class="fixed top-0 w-full nav-blur border-b border-gray-200 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-2">
                    <div class="w-8 h-8 bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold text-sm">ç ”</span>
                    </div>
                    <span class="font-semibold text-gray-800 text-lg">ç ”æŠ¥è§£è¯»åŠ©æ‰‹</span>
                </div>
                <div class="flex space-x-6">
                    <a href="/api/analyze" class="text-gray-600 hover:text-yellow-600 transition-colors">é¦–é¡µ</a>
                    <a href="#" class="text-yellow-600 font-medium">ç»“æœ</a>
                    <a href="about.html" class="text-gray-600 hover:text-yellow-600 transition-colors">å…³äº</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="pt-16 min-h-screen">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- ===== æŠ¥å‘Šæ ‡é¢˜å’ŒåŸºæœ¬ä¿¡æ¯ - å¯ç¼–è¾‘ ===== -->
            <div class="content-card rounded-xl p-6 mb-8">
                <div class="flex items-start justify-between">
                    <div>
                        <h1 id="reportTitle" class="hero-title text-2xl md:text-3xl font-bold text-gray-800 mb-2">
                            ç ”æŠ¥è§£è¯»ç»“æœ
                        </h1>
                        <div class="flex flex-wrap items-center text-sm text-gray-600 space-x-4">
                            <span id="reportSource">ğŸ“Š æ¥æºï¼šç”¨æˆ·ä¸Šä¼ </span>
                            <span id="reportDate">ğŸ“… æ—¥æœŸï¼š<script>document.write(new Date().toLocaleDateString())</script></span>
                            <span>â±ï¸ è§£è¯»æ—¶é—´ï¼š3-5åˆ†é’Ÿ</span>
                        </div>
                    </div>
                    <div class="flex space-x-2">
                        <button class="bg-yellow-500 text-white px-4 py-2 rounded-lg hover:bg-yellow-600 transition-colors text-sm">
                            å¯¼å‡ºPDF
                        </button>
                        <button class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors text-sm">
                            å¤åˆ¶é“¾æ¥
                        </button>
                    </div>
                </div>
                
                <!-- åŠ è½½çŠ¶æ€ - å¯ç¼–è¾‘ -->
                <div id="loadingState" class="mt-4 p-4 bg-blue-50 border-l-4 border-blue-400 rounded-lg">
                    <div class="flex items-center">
                        <div class="loading-spinner mr-3"></div>
                        <div>
                            <h4 class="font-semibold text-blue-800">æ­£åœ¨åˆ†æç ”æŠ¥</h4>
                            <p class="text-blue-700 text-sm">æ­£åœ¨å¤„ç†æ‚¨çš„ç ”æŠ¥æ–‡ä»¶ï¼Œè¯·ç¨å€™...</p>
                        </div>
                    </div>
                </div>
                
                <!-- é”™è¯¯çŠ¶æ€ - å¯ç¼–è¾‘ -->
                <div id="errorState" class="mt-4 p-4 bg-red-50 border-l-4 border-red-400 rounded-lg hidden">
                    <div class="flex items-start">
                        <svg class="w-5 h-5 text-red-500 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <div>
                            <h4 class="font-semibold text-red-800">åˆ†æå¤±è´¥</h4>
                            <p id="errorMessage" class="text-red-700 text-sm"></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ===== ä¸»å†…å®¹åŒºåŸŸ - å¯ç¼–è¾‘ ===== -->
            <div class="flex flex-col lg:flex-row gap-8">
                <!-- ä¾§è¾¹å¯¼èˆª - å¯ç¼–è¾‘ -->
                <div class="lg:w-64 flex-shrink-0">
                    <div class="sidebar-nav bg-white rounded-xl p-4 shadow-lg">
                        <h3 class="font-semibold text-gray-800 mb-4">ğŸ“‘ å†…å®¹å¯¼èˆª</h3>
                        <div class="space-y-1">
                            <div class="nav-item active p-2 rounded cursor-pointer text-sm" data-section="summary">
                                ğŸ“Š æ ¸å¿ƒæ€»ç»“
                            </div>
                            <div class="nav-item p-2 rounded cursor-pointer text-sm" data-section="analysis">
                                ğŸ” è¯¦ç»†åˆ†æ
                            </div>
                            <div class="nav-item p-2 rounded cursor-pointer text-sm" data-section="insights">
                                ğŸ’¡ æŠ•èµ„å¯ç¤º
                            </div>
                        </div>

                        <div class="mt-6 pt-6 border-t border-gray-200">
                            <h4 class="font-semibold text-gray-800 mb-3">ğŸ“ˆ å…³é”®æŒ‡æ ‡</h4>
                            <div class="space-y-2 text-xs">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">å¤„ç†çŠ¶æ€</span>
                                    <span class="text-green-600 font-medium">å·²å®Œæˆ</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">æ–‡ä»¶æ ¼å¼</span>
                                    <span id="fileFormat" class="text-blue-600 font-medium">-</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">æ–‡ä»¶å¤§å°</span>
                                    <span id="fileSize" class="text-purple-600 font-medium">-</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ä¸»å†…å®¹åŒºåŸŸ - å¯ç¼–è¾‘ -->
                <div class="flex-1">
                    <!-- æ ¸å¿ƒæ€»ç»“ - å¯ç¼–è¾‘ -->
                    <div id="summary" class="content-card rounded-xl p-6 mb-6">
                        <div class="flex items-center mb-4">
                            <div class="w-8 h-8 bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-lg flex items-center justify-center mr-3">
                                <span class="text-white font-bold text-sm">æ ¸</span>
                            </div>
                            <h2 class="text-xl font-bold text-gray-800">å…¨æ–‡æ ¸å¿ƒæ€»ç»“</h2>
                        </div>
                        <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border-l-4 border-blue-400">
                            <p id="summaryContent" class="text-gray-700 leading-relaxed">
                                æ­£åœ¨åŠ è½½åˆ†æç»“æœ...
                            </p>
                        </div>
                    </div>

                    <!-- è¯¦ç»†åˆ†æ - å¯ç¼–è¾‘ -->
                    <div id="analysis" class="content-card rounded-xl p-6 mb-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                            <span class="text-2xl mr-2">ğŸ”</span>
                            è¯¦ç»†åˆ†æ
                        </h3>
                        
                        <div id="analysisContent">
                            <!-- åŠ¨æ€åŠ è½½åˆ†æå†…å®¹ -->
                        </div>
                    </div>

                    <!-- æŠ•èµ„å¯ç¤º - å¯ç¼–è¾‘ -->
                    <div id="insights" class="content-card rounded-xl p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                            <span class="text-2xl mr-2">ğŸ’¡</span>
                            æŠ•èµ„å¯ç¤ºä¸å»ºè®®
                        </h3>
                        <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 border-l-4 border-purple-400">
                            <div class="space-y-3 text-sm text-gray-700">
                                <p><strong>ğŸ“Œ æ ¸å¿ƒè®¤çŸ¥ï¼š</strong>åŸºäºå½“å‰åˆ†æï¼Œå»ºè®®å…³æ³¨å¸‚åœºä¸»è¦è¶‹åŠ¿å’Œå…³é”®æ•°æ®æŒ‡æ ‡ã€‚</p>
                                <p><strong>ğŸ“Œ æŠ•èµ„é€»è¾‘ï¼š</strong>ç»“åˆå®è§‚ç»æµç¯å¢ƒå’Œè¡Œä¸šå‘å±•æ€åŠ¿ï¼Œåˆ¶å®šåˆç†çš„æŠ•èµ„ç­–ç•¥ã€‚</p>
                                <p><strong>ğŸ“Œ é£é™©æç¤ºï¼š</strong>æŠ•èµ„æœ‰é£é™©ï¼Œå»ºè®®åˆ†æ•£æŠ•èµ„ï¼Œæ§åˆ¶å•ä¸€æ ‡çš„ä»“ä½ã€‚</p>
                                <p><strong>ğŸ“Œ æ“ä½œå»ºè®®ï¼š</strong>æ ¹æ®è‡ªèº«é£é™©æ‰¿å—èƒ½åŠ›ï¼Œé€‰æ‹©åˆé€‚çš„æŠ•èµ„æ—¶æœºå’Œæ ‡çš„ã€‚</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== JavaScripté€»è¾‘ - å¯ç¼–è¾‘ ===== -->
    <script>
        class ResultPage {
            constructor() {
                this.init();
            }

            init() {
                this.loadAnalysisResult();
                this.setupNavigation();
                this.setupAnimations();
            }

            loadAnalysisResult() {
                const analysisResult = sessionStorage.getItem('analysisResult');
                const filename = sessionStorage.getItem('filename');
                
                if (analysisResult) {
                    try {
                        const result = JSON.parse(analysisResult);
                        this.displayResult(result, filename);
                    } catch (error) {
                        console.error('è§£æåˆ†æç»“æœå¤±è´¥:', error);
                        this.showError('åˆ†æç»“æœæ ¼å¼é”™è¯¯');
                    }
                } else {
                    // æ˜¾ç¤ºç¤ºä¾‹å†…å®¹
                    this.showExampleContent();
                }
            }

            displayResult(result, filename) {
                // éšè—åŠ è½½çŠ¶æ€
                document.getElementById('loadingState').classList.add('hidden');
                
                // æ›´æ–°æ ‡é¢˜å’Œæ–‡ä»¶ä¿¡æ¯
                if (filename) {
                    document.getElementById('reportTitle').textContent = `${filename} - ç ”æŠ¥è§£è¯»`;
                    document.getElementById('fileFormat').textContent = filename.split('.').pop().toUpperCase();
                }
                
                // æ˜¾ç¤ºæ ¸å¿ƒæ€»ç»“
                if (result.data && result.data.summary) {
                    document.getElementById('summaryContent').textContent = result.data.summary;
                }
                
                // æ˜¾ç¤ºè¯¦ç»†åˆ†æ
                this.displayAnalysis(result.data);
            }

            displayAnalysis(data) {
                const analysisContent = document.getElementById('analysisContent');
                
                if (data.sections && data.sections.length > 0) {
                    let html = '';
                    
                    data.sections.forEach((section, index) => {
                        html += `
                            <div class="mb-6">
                                <h4 class="font-semibold text-gray-800 mb-3">ç¬¬${index + 1}æ®µåˆ†æ</h4>
                                
                                <div class="original-text rounded-lg p-4 mb-4">
                                    <h5 class="font-semibold text-blue-800 mb-2">åŸæ–‡</h5>
                                    <p class="text-gray-700 text-sm leading-relaxed">${section.original || 'åŸæ–‡å†…å®¹'}</p>
                                </div>
                                
                                <div class="interpretation-text rounded-lg p-4 mb-4">
                                    <h5 class="font-semibold text-amber-800 mb-2">è§£è¯»</h5>
                                    <p class="text-gray-700 text-sm leading-relaxed">${section.interpretation || 'è§£è¯»å†…å®¹'}</p>
                                </div>
                                
                                <div class="key-point rounded-lg p-4">
                                    <h5 class="font-semibold text-green-800 mb-2">é‡ç‚¹æç‚¼</h5>
                                    <div class="space-y-1">
                                        ${(section.keyPoints || ['è¦ç‚¹1', 'è¦ç‚¹2', 'è¦ç‚¹3']).map(point => 
                                            `<div class="flex items-start"><span class="highlight-number mr-2">â—</span><span class="text-sm text-gray-700">${point}</span></div>`
                                        ).join('')}
                                    </div>
                                </div>
                            </div>
                        `;
                    });
                    
                    analysisContent.innerHTML = html;
                } else {
                    // æ˜¾ç¤ºé»˜è®¤åˆ†æå†…å®¹
                    analysisContent.innerHTML = `
                        <div class="original-text rounded-lg p-4 mb-4">
                            <h5 class="font-semibold text-blue-800 mb-2">åŸæ–‡ç¤ºä¾‹</h5>
                            <p class="text-gray-700 text-sm leading-relaxed">
                                è¿™æ˜¯æ¨¡æ‹Ÿçš„åŸæ–‡å†…å®¹ã€‚åœ¨å®Œæ•´ç‰ˆæœ¬ä¸­ï¼Œè¿™é‡Œå°†æ˜¾ç¤ºæ‚¨ä¸Šä¼ çš„ç ”æŠ¥åŸæ–‡ã€‚
                            </p>
                        </div>
                        
                        <div class="interpretation-text rounded-lg p-4 mb-4">
                            <h5 class="font-semibold text-amber-800 mb-2">è§£è¯»ç¤ºä¾‹</h5>
                            <p class="text-gray-700 text-sm leading-relaxed">
                                è¿™æ˜¯æ¨¡æ‹Ÿçš„è§£è¯»å†…å®¹ã€‚åœ¨å®Œæ•´ç‰ˆæœ¬ä¸­ï¼Œè¿™é‡Œå°†æ˜¾ç¤ºAIç”Ÿæˆçš„é€šä¿—æ˜“æ‡‚è§£è¯»ã€‚
                            </p>
                        </div>
                        
                        <div class="key-point rounded-lg p-4">
                            <h5 class="font-semibold text-green-800 mb-2">é‡ç‚¹æç‚¼ç¤ºä¾‹</h5>
                            <div class="space-y-1">
                                <div class="flex items-start">
                                    <span class="highlight-number mr-2">â—</span>
                                    <span class="text-sm text-gray-700">ç¤ºä¾‹è¦ç‚¹1ï¼šè¿™æ˜¯é‡è¦çš„æ•°æ®ç‚¹</span>
                                </div>
                                <div class="flex items-start">
                                    <span class="highlight-number mr-2">â—</span>
                                    <span class="text-sm text-gray-700">ç¤ºä¾‹è¦ç‚¹2ï¼šè¿™æ˜¯å…³é”®çš„é€»è¾‘è½¬æŠ˜</span>
                                </div>
                                <div class="flex items-start">
                                    <span class="highlight-number mr-2">â—</span>
                                    <span class="text-sm text-gray-700">ç¤ºä¾‹è¦ç‚¹3ï¼šè¿™æ˜¯æ ¸å¿ƒçš„æŠ•èµ„å¯ç¤º</span>
                                </div>
                            </div>
                        </div>
                    `;
                }
            }

            showExampleContent() {
                document.getElementById('loadingState').classList.add('hidden');
                document.getElementById('reportTitle').textContent = 'ç¤ºä¾‹ï¼šç ”æŠ¥è§£è¯»ç»“æœ';
                document.getElementById('reportSource').textContent = 'ğŸ“Š æ¥æºï¼šç¤ºä¾‹ç ”æŠ¥ï¼ˆæ¼”ç¤ºç”¨ï¼‰';
                
                document.getElementById('summaryContent').textContent = 
                    'è¿™æ˜¯æ¼”ç¤ºç‰ˆæœ¬çš„æ¨¡æ‹Ÿåˆ†æç»“æœã€‚åœ¨å®Œæ•´ç‰ˆæœ¬ä¸­ï¼Œè¿™é‡Œå°†æ˜¾ç¤ºåŸºäºæ‚¨ä¸Šä¼ ç ”æŠ¥çš„çœŸå®AIåˆ†æç»“æœï¼ŒåŒ…æ‹¬æ ¸å¿ƒè§‚ç‚¹ã€å…³é”®æ•°æ®å’ŒæŠ•èµ„å»ºè®®ã€‚';
                
                // æ˜¾ç¤ºç¤ºä¾‹åˆ†æå†…å®¹
                this.displayAnalysis({});
            }

            showError(message) {
                document.getElementById('loadingState').classList.add('hidden');
                document.getElementById('errorState').classList.remove('hidden');
                document.getElementById('errorMessage').textContent = message;
            }

            setupNavigation() {
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.addEventListener('click', function() {
                        document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
                        this.classList.add('active');
                        
                        const targetId = this.getAttribute('data-section');
                        const targetElement = document.getElementById(targetId);
                        if (targetElement) {
                            targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        }
                    });
                });
            }

            setupAnimations() {
                // é¡µé¢åŠ è½½åŠ¨ç”»
                anime({
                    targets: '.content-card',
                    translateY: [30, 0],
                    opacity: [0, 1],
                    duration: 800,
                    delay: anime.stagger(100),
                    easing: 'easeOutQuart'
                });
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            new ResultPage();
        });
    </script>
</body>
</html>